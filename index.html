<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Resúmenes: XML, JSON, AJAX, Formulario y MVC</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    body{font-family:Inter, system-ui, Arial; background:linear-gradient(180deg,#071126 0%,#071a2b 100%);color:#e6eef6;margin:0;padding:32px}
    .wrap{max-width:900px;margin:0 auto}
    header{display:flex;gap:12px;align-items:center;margin-bottom:20px}
    header h1{font-size:20px;margin:0}
    .card{background:var(--card);border-radius:12px;padding:18px;margin-bottom:16px;box-shadow:0 6px 24px rgba(2,6,23,0.6)}
    h2{margin:0 0 8px 0;color:var(--accent)}
    pre{background:var(--glass);padding:12px;border-radius:8px;overflow:auto;color:#cfeefb}
    code{font-family:monospace; font-size:13px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    button{background:transparent;border:1px solid #173246;color:var(--accent);padding:8px 10px;border-radius:8px;cursor:pointer}
    .result{margin-top:10px;padding:10px;border-radius:8px;background:#021224;color:#bfeaf7}
    form input, form button{display:block;width:100%;padding:8px;margin-top:8px;border-radius:8px;border:1px solid #123345;background:transparent;color:#dff6fb}
    small{color:var(--muted)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:720px){.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden><rect width="24" height="24" rx="6" fill="#052233"/><path d="M6 12h12M6 8h12M6 16h12" stroke="#06b6d4" stroke-width="1.2" stroke-linecap="round"/></svg>
      <div>
        <h1>Resúmenes: XML · JSON · AJAX · Formulario (BD sim) · MVC</h1>
        
      </div>
    </header>

    <!-- XML -->
    <section class="card" id="xml">
      <h2>XML — Resumen y uso</h2>
      <p>XML (eXtensible Markup Language) es un formato de texto para <strong>almacenar y transportar datos</strong> con una estructura jerárquica. Es legible por humanos y máquinas. Se usa en configuraciones, intercambio entre sistemas o servicios SOAP.</p>
      <p><strong>Ejemplo:</strong></p>
      <pre><code>&lt;estudiante&gt;
  &lt;nombre&gt;Juan&lt;/nombre&gt;
  &lt;edad&gt;20&lt;/edad&gt;
  &lt;carrera&gt;Contabilidad&lt;/carrera&gt;
&lt;/estudiante&gt;</code></pre>
      <div class="actions">
        <button onclick="mostrarXML()">Mostrar XML (parseado)</button>
        <button onclick="copiarTexto('xmlExample')">Copiar ejemplo XML</button>
      </div>
      <div id="xmlResult" class="result" style="display:none"></div>
    </section>

    <!-- JSON -->
    <section class="card" id="json">
      <h2>JSON — Resumen y uso</h2>
      <p>JSON (JavaScript Object Notation) es un formato ligero para intercambiar datos. Es el estándar en APIs REST y fácil de usar con JavaScript.</p>
      <p><strong>Ejemplo:</strong></p>
      <pre id="jsonExample"><code>{
  "nombre": "Ana",
  "edad": 22,
  "carrera": "Informática"
}</code></pre>
      <div class="actions">
        <button onclick="mostrarJSON()">Mostrar JSON (objeto)</button>
        <button onclick="copiarTexto('jsonExample')">Copiar ejemplo JSON</button>
      </div>
      <div id="jsonResult" class="result" style="display:none"></div>
    </section>

    <!-- AJAX -->
    <section class="card" id="ajax">
      <h2>AJAX — Resumen y ejemplo de funcionamiento</h2>
      <p>AJAX permite comunicarse con el servidor <strong>sin recargar la página</strong>. Hoy en día se usa <code>fetch()</code> (promesas/async) para hacer solicitudes asíncronas.</p>

      <div class="row">
        <div>
          <p><strong>Ejemplo práctico:</strong> simulamos un servidor creando una URL de blob con JSON y luego hacemos <code>fetch()</code>.</p>
          <div class="actions">
            <button onclick="crearYFetch()">Simular AJAX (fetch)</button>
          </div>
        </div>
        <div>
          <p><strong>Respuesta:</strong></p>
          <div id="ajaxResult" class="result">(aquí aparecerá la respuesta)</div>
        </div>
      </div>
    </section>

    <!-- Formulario con BD sim -->
    <section class="card" id="form">
      <h2>Formulario con acceso a BD (simulado)</h2>
      <p>En producción el formulario envía datos a un backend (PHP, Node.js, Python...) que guarda en la base de datos. Aquí simulamos guardado en <strong>localStorage</strong> y mostramos cómo sería la petición <code>fetch POST</code>.</p>

      <form id="miFormulario" onsubmit="return guardarSimulado(event)">
        <input id="nombre" type="text" placeholder="Nombre" required>
        <input id="correo" type="email" placeholder="Correo" required>
        <button type="submit">Guardar (simulado)</button>
      </form>
      <small>Ejemplo de POST (backend): <code>fetch('/api/guardar',{method:'POST',body:JSON.stringify(data)})</code></small>
      <div id="formResult" class="result" style="display:none"></div>
      <div style="margin-top:8px"><button onclick="verRegistros()">Ver registros guardados (localStorage)</button></div>
      <pre id="registroList" style="display:none;background:var(--glass);padding:10px;border-radius:8px;color:#cfeefb"></pre>
    </section>

    <!-- MVC -->
    <section class="card" id="mvc">
      <h2>Modelo - Vista - Controlador (MVC)</h2>
      <p>MVC es un patrón que separa responsabilidades: <strong>Modelo</strong> (datos), <strong>Vista</strong> (UI) y <strong>Controlador</strong> (lógica). Mejora mantenimiento y pruebas.</p>
      <p><strong>Mini ejemplo: contador con MVC</strong></p>
      <div class="actions">
        <button onclick="mvcController.increment()">Incrementar</button>
        <button onclick="mvcController.decrement()">Decrementar</button>
        <button onclick="mvcController.reset()">Reset</button>
      </div>
      <div id="mvcView" class="result" style="font-size:20px;display:flex;align-items:center;justify-content:space-between">
        <span>Valor: <strong id="mvcValue">0</strong></span>
        <small id="mvcNote">(modelo & vista separados)</small>
      </div>

      <pre style="margin-top:12px"><code>// Código MVC incluido más abajo en el script</code></pre>
    </section>

    <footer style="text-align:center;margin-top:18px;color:var(--muted)"></footer>
  </div>

  <script>
    // Ejemplos y utilidades
    const xmlExample = `<estudiante>\n  <nombre>Juan</nombre>\n  <edad>20</edad>\n  <carrera>Contabilidad</carrera>\n</estudiante>`;
    const jsonExample = { nombre: "Ana", edad: 22, carrera: "Informática" };

    function mostrarXML(){
      const parser = new DOMParser();
      const doc = parser.parseFromString(xmlExample, 'application/xml');
      const nombre = doc.querySelector('nombre')?.textContent || '—';
      const edad = doc.querySelector('edad')?.textContent || '—';
      const carrera = doc.querySelector('carrera')?.textContent || '—';
      const out = `Nombre: ${nombre}\nEdad: ${edad}\nCarrera: ${carrera}`;
      const r = document.getElementById('xmlResult'); r.style.display='block'; r.textContent = out;
    }

    function mostrarJSON(){
      const r = document.getElementById('jsonResult'); r.style.display='block'; r.textContent = JSON.stringify(jsonExample, null, 2);
    }

    function copiarTexto(id){
      const el = document.getElementById(id);
      const text = el ? el.innerText : (id==='xmlExample' ? xmlExample : '');
      navigator.clipboard?.writeText(text).then(()=>alert('Copiado al portapapeles'));
    }

    // AJAX: creamos un blob con JSON y luego fetch a esa URL para simular una respuesta de servidor
    function crearYFetch(){
      const datos = { mensaje: 'Hola desde el servidor simulado', fecha: new Date().toISOString() };
      const blob = new Blob([JSON.stringify(datos)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const out = document.getElementById('ajaxResult'); out.textContent = 'Cargando...';
      fetch(url)
        .then(r => r.json())
        .then(j => { out.textContent = JSON.stringify(j, null, 2); URL.revokeObjectURL(url); })
        .catch(err => { out.textContent = 'Error: ' + err; URL.revokeObjectURL(url); });
    }

    // Formulario: simulamos guardado en localStorage (actúa como "BD" local)
    function guardarSimulado(e){
      e.preventDefault();
      const nombre = document.getElementById('nombre').value.trim();
      const correo = document.getElementById('correo').value.trim();
      const data = { id: Date.now(), nombre, correo };
      const registros = JSON.parse(localStorage.getItem('registros_sim')) || [];
      registros.push(data);
      localStorage.setItem('registros_sim', JSON.stringify(registros));
      const r = document.getElementById('formResult'); r.style.display='block'; r.textContent = 'Guardado (simulado) en localStorage ✅';
      e.target.reset();
      return false;
    }
    function verRegistros(){
      const registros = JSON.parse(localStorage.getItem('registros_sim')) || [];
      const el = document.getElementById('registroList');
      el.style.display = 'block';
      el.textContent = registros.length ? JSON.stringify(registros, null, 2) : '(no hay registros)';
    }

    // MVC simple
    class CounterModel{
      constructor(){ this.value = 0; this.listeners = []; }
      set(v){ this.value = v; this._notify(); }
      get(){ return this.value; }
      onChange(fn){ this.listeners.push(fn); }
      _notify(){ this.listeners.forEach(f => f(this.value)); }
    }
    class CounterView{
      constructor(rootId){ this.root = document.getElementById(rootId); this.valueEl = document.getElementById('mvcValue'); }
      render(value){ this.valueEl.textContent = value; }
    }
    class CounterController{
      constructor(model, view){ this.model = model; this.view = view; this.model.onChange(v => this.view.render(v)); }
      increment(){ this.model.set(this.model.get()+1); }
      decrement(){ this.model.set(this.model.get()-1); }
      reset(){ this.model.set(0); }
    }
    const mvcModel = new CounterModel();
    const mvcView = new CounterView('mvcView');
    const mvcController = new CounterController(mvcModel, mvcView);

    // Expose controller to buttons in inline handlers
    window.mvcController = mvcController;

  </script>
</body>
</html>
